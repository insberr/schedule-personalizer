<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=10.0, user-scalable=yes">
    <title>Schedule Personalizer</title>
    <link rel="stylesheet" href="style.scss">
    <style>
      .body-why {
        background-color: #272727;
        font-family: Arial, Helvetica, sans-serif;
        color: white;
        font-weight: 700;
        text-align: center;
      }
      .hidden-why {
        display: none;
      }
    </style>
    <meta name="description" content="Schedule? Personalized.">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-touch-fullscreen" content="yes">
    <meta name="apple-mobile-web-app-title" content="Schedule">
    <meta name="background-color" content="#272727">

    <!-- icon stuff-->
    <link rel="manifest" href="./manifest.webmanifest">
    <meta name="theme-color" content="#272727">
    <link rel="icon" sizes="32x32" href="./icons/icon.png?width=32&amp;height=32">
    <link rel="icon" sizes="16x16" href="./icons/icon.png?width=16&amp;height=16">
    <link rel="apple-touch-icon" sizes="180x180" href="./icons/maskable_icon.png?width=180&amp;height=180">
    <meta name="background-color" content="#272727">
    <meta name="apple-mobile-web-app-capable" content="yes">
  </head>
  <body>
    <div class="full-center text-center" id="loading">
      <div class="why-does-this-error-exist hidden-why">
        <div>If you see this, then something is very wrong..</div>
        <div>If this doesnt fix itself, try clearing the site data or re-adding Schedule Personalizer to your homescreen.</div>
        <div>Attempting to self fix in 5 seconds</div>
      </div>
      <div class="spinner-grow text-crimson" role="status"></div>
    </div>
    <div id="app"></div>
    <script>
      // This is if the app never loads ...
      setTimeout(() => {
        const elms = Array.from(document.getElementsByClassName('why-does-this-error-exist'));
        if (elms.length > 0) {
          console.log('Thats odd... This shouldnt happen. For some reason the app never rendered. Attempting to self fix.');
          document.getElementsByTagName('body')[0].classList.add('body-why');
          elms.forEach((e) => {
            e.classList.remove('hidden-why');
          });
          setTimeout(() => {
            caches.keys().then((names) => {
              for (let name of names) {
                caches.delete(name);
              }
              location.reload();
            });
          }, 5000);
        }
      }, 5000);
    </script>
    <script type="module" src="index.tsx"></script>
  </body>
</html>